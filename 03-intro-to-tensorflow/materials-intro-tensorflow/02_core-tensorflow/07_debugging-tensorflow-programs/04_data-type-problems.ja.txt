これまでに見てきた形状エラーの他にも よくあるエラーとして データ型エラーがあります このエラーメッセージには 「int型配列の値からなるテンソルが float型のテンソルを求める
メソッドに渡された」とあります これはどこで発生するのでしょう コールトレースを見ると 加算演算の行があります s=(a+b)です aはfloat型の配列なのに対し
bはint型の配列でしょう 「整数に浮動小数点数を足すのは
問題ない 結果は浮動小数点数になるはずだ」 こうお考えでしょうか PythonでもC++でも
float型配列をint型には変換できません ストレージを
最適化する必要があります int 配列では
データが保存されるデバイスやメモリで 浮動小数点を
演算できないことがあります ですから修正が必要です 四捨五入して
整数にしますか int配列を float配列にしてしまいましたか float配列になると知りながら castでint型をfloat型に変換して
加算しますか 複数の選択肢があるので 明確にすべきです 修正方法の1つはint型配列bを float型のテンソルに変換することです tf.cast呼び出しを
計算グラフに挿入すると 最適化などで bの保存先や転送方法を決める際に
それが考慮されます つまり ここでは tf.cast演算を
メソッドに加えます